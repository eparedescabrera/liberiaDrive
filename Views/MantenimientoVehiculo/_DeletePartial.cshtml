@model LiberiaDriveMVC.Models.MantenimientoVehiculo

<div class="p-3">
    <h5 class="text-center mb-3">
        <i class="bi bi-exclamation-triangle text-danger"></i> Confirmar eliminaci√≥n
    </h5>

    <p>¬øDesea eliminar el mantenimiento del veh√≠culo <strong>@Model.IdVehiculoNavigation.Marca</strong> 
    realizado el <strong>@Model.FechaMantenimiento.ToString("dd/MM/yyyy")</strong>?</p>

    <form id="formEliminarMantenimiento">
        <input type="hidden" name="IdMantenimiento" value="@Model.IdMantenimiento" />

        <div class="text-end mt-4">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                <i class="bi bi-x-circle"></i> Cancelar
            </button>
            <button type="submit" class="btn btn-danger">
                <i class="bi bi-trash"></i> Eliminar
            </button>
        </div>
    </form>
</div>

@section Scripts {
<script>
$(document).ready(function () {

    // üöÄ Confirmar eliminaci√≥n
    $(document).off('submit', '#formEliminarMantenimiento').on('submit', '#formEliminarMantenimiento', function (e) {
        e.preventDefault();

        const id = $('input[name="IdMantenimiento"]').val();

        Swal.fire({
            title: "¬øEliminar mantenimiento?",
            text: "Esta acci√≥n no se puede deshacer.",
            icon: "warning",
            showCancelButton: true,
            confirmButtonText: "S√≠, eliminar",
            cancelButtonText: "Cancelar"
        }).then((result) => {
            if (result.isConfirmed) {
                $.post("/MantenimientoVehiculo/DeleteConfirmed/" + id, function (resp) {
                    if (resp.success) {
                        Swal.fire("‚úÖ Eliminado", "El mantenimiento fue eliminado correctamente", "success")
                            .then(() => location.reload());
                    } else {
                        Swal.fire("‚ùå Error", resp.message, "error");
                    }
                });
            }
        });
    });
});
</script>
}
